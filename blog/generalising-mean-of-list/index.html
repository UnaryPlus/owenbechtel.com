<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="/bootstrap.min.css">
                
        <title>Generalising the mean of a list</title>
    </head>
    <body>
        <script src="/navbar.js"></script>
        <script>navbar("blog")</script>
        <div class="w-75 m-auto" style="padding-top:50px">
            <h4>Generalising the mean of a list</h4>
            <p>30 Jan 2022</p>
            <p>
                The <em>free semigroup </em>on a set X, denoted X<sup>+</sup>, is the set of nonempty 
                ordered lists whose items are elements of X. For example, ‚Ñ§<sup>+</sup> is the set of 
                nonempty lists of integers, such as [3, 1] and [5, -6, 12]. For all sets X, there is a 
                "length"<em> </em>function Œõ : X<sup>+</sup> ‚Üí ‚Ñï<sub>>0</sub> that calculates the 
                length of a list. (Here,  ‚Ñï<sub>>0</sub> is the set of natural numbers excluding 0.)
            </p>
            <p>
                If (X, +) is a semigroup, then there is also a "sum" function ‚àë : X<sup>+</sup> ‚Üí X 
                that combines every item in a list using the semigroup operation. For example, 
                ‚àë[x, y, z] = x + y + z. Because (X, +) can be any semigroup, the + symbol does not 
                necessarily denote addition. It could also be multiplication, function composition, 
                maximum, minimum, greatest common divisor, etc. Any associative operation will do.
            </p>
            <p>
                Every semigroup (X, +) admits a binary function p : ‚Ñï<sub>>0 </sub>√ó X ‚Üí X, which I 
                will denote by juxtaposition; nx, short for p(n, x), is the result of combining x with 
                itself n times. For example, 3x = p(3, x) = x + x + x.
            </p>
            <p>
                In summary, for any semigroup (X, +), you can calculate the length of a list in 
                X<sup>+</sup> with Œõ and the "sum" of a list in X<sup>+ </sup>with ‚àë. You can also 
                "multiply" nonzero natural numbers with the elements of X. Using these three operations, 
                I will define a binary relation ‚§ö between X<sup>+</sup> and X. If a is an element of 
                X<sup>+</sup> and x is an element of X, then a ‚§ö x if and only if ‚àë(a) = Œõ(a)x. In 
                this case, we say that x is a <em>mean</em> of a.
            </p>
            <p>
                That's a very general definition (it works for any semigroup), so here are 
                some concrete examples:
            </p>
            <ol>
                <li>
                    If the semigroup in question is (‚Ñù, +), then a ‚§ö x means that x is the arithmetic 
                    mean of the list a.
                </li>
                <li>
                    If the semigroup is (‚Ñù<sub>>0</sub>, ¬∑), the set of positive real numbers under 
                    multiplication, then a ‚§ö x means that x is the geometric mean of the list a.
                </li>
                <li>
                    If the semigroup is (‚Ñ§, max), then a ‚§ö x means that x is the maximum of a. 
                    This is because ‚àë(a) calculates the maximum of a, and nx = x for all n 
                    (i.e. the semigroup is idempotent). Similarly, in (‚Ñ§, min), a ‚§ö x means that x 
                    is the minimum of a.
                </li>
                <li>
                    If the semigroup is itself a free semigroup, i.e. X<sup>+</sup> for some set X, 
                    then ‚àë : X<sup>++</sup> ‚Üí X<sup>+</sup> is a function that flattens a list of lists. 
                    Unlike the previous examples, ‚§ö in this case is not a total relation, or in other 
                    words, not every list of lists has a mean. Those that <em>do </em>have a mean are 
                    of a very special variety. For example, the mean of [[x, y], [z, x, y, z], [x, y, z]] 
                    is [x, y, z], because flattening the former gives the same result as repeating the 
                    latter 3 times.
                </li>
                <li>
                    If the semigroup is (ùîπ, ‚àß), the set of boolean values under logical conjunction, 
                    then a ‚§ö 1 if every item in a is 1; otherwise, a ‚§ö 0. Conversely, in (ùîπ, ‚à®), a ‚§ö 1 
                    if <em>any</em> item in a is 1.
                </li>
                <li>
                    If the semigroup operation is modular addition, then means are not always unique. 
                    For example, in the cyclic group  ‚Ñ§/3‚Ñ§, the mean of [1, 2, 0] can be either 
                    0, 1, or 2, because 1 + 2 + 0 = 3(0) = 3(1) = 3(2). This shows why ‚§ö has to be 
                    defined as a <em>relation</em> and not a function. A list doesn't always have 
                    exactly one mean; it could have 0, or 3, or even an infinite number.
                <li>
                    If the semigroup is (‚Ñù ‚Üí ‚Ñù, ‚àò), then a ‚§ö f means that performing every function 
                    in the list a is equivalent to repeating f, Œõ(a) times. Finding a mean of a list 
                    of functions amounts to composing every function in the list and then taking the 
                    <a href="https://en.wikipedia.org/wiki/Functional_square_root">functional root</a>.
                </li>
            </ol>
            <p>
                A semigroup (X, +) is <em>meaningful</em> if the ‚§ö relation can be made into a function; 
                for every a ‚àà X<sup>+</sup>, there is a unique Œº(a) ‚àà X such that a ‚§ö Œº(a). 
                Instead of saying that Œº(a) is a mean of a, we can now confidently say that Œº(a) 
                is <em>the </em>mean of a. In examples 1, 2, 3, and 5 above, the semigroup in 
                question is meaningful, but in examples 4, 6, and 7, it is not. A semigroup that 
                is not meaningful is called <em>meaningless</em>. In a meaningless semigroup, the ‚§ö 
                relation is either non-total or multi-valued, so it cannot be made into a function.
            </p>
            <p>
                A <em>mean-preserving homomorphism </em>from (X, +) to (Y, ‚àó) is a function h : X ‚Üí Y 
                with the following properties:
            </p>
            <ol>
                <li>
                    h is a semigroup homomorphism: h(x + y) = h(x) ‚àó h(y).
                </li>
                <li>
                    h respects the mean relation: a ‚§ö x implies h(a) ‚§ö h(x), where h(a) denotes the 
                    application of h to every item in a.
                </li>
            </ol>
            <p>
                One can prove that <em>all</em> semigroup homomorphisms are mean-preserving. Assume 
                h is a homomorphism from (X, +) to (Y, ‚àó), a ‚àà X<sup>+</sup>, and x ‚àà X. 
                Then a ‚§ö x ‚áî ‚àë(a) = Œõ(a)x ‚áí h(‚àë(a)) = h(Œõ(a)x). Because h is a homomorphism, h(nx) = nh(x), 
                and h(‚àë(a)) = ‚àë(h(a)). The latter can be demonstrated by replacing the list a with its 
                components: h(‚àë(a)) = h(a<sub>0</sub> + a<sub>1</sub> + ‚Ä¶ a<sub>n</sub>) = h(a<sub>0</sub>) 
                ‚àó h(a<sub>1</sub>) ‚àó ‚Ä¶ h(a<sub>n</sub>) = ‚àë(h(a)). Therefore, the equality h(‚àë(a)) = h(Œõ(a)x) 
                is equivalent to ‚àë(h(a)) = Œõ(a)h(x). Applying h to a list does not change its length, so we 
                get that ‚àë(h(a)) = Œõ(h(a))h(x) ‚áî h(a) ‚§ö h(x). In summary, for any homomorphism h, a ‚§ö x 
                implies h(a) ‚§ö h(x).
            </p>
            <p>
                I will use the term <em>divisible semigroup</em> for a semigroup X satisfying the 
                following property: for every x ‚àà X and n ‚àà ‚Ñï<sub>>0</sub>, there is a unique y ‚àà X such 
                that ny = x. The element y is called the nth factor of x, and is written x / n. It isn't 
                difficult to see that all divisible semigroups are meaningful, with Œº(a) = ‚àë(a) / Œõ(a). 
                But the reverse implication (that all meaningful semigroups are divisible) is not true. 
            </p>
            <p>
                One example of a semigroup which is meaningful but not divisible is (‚Ñù<sub>>2</sub>, ¬∑). 
                This is a valid semigroup, because the product of numbers greater than 2 will also be 
                greater than 2. It is meaningful, because the geometric mean of a list of numbers greater 
                than 2 will also be greater than 2. But it is not divisible, because the nth root of a 
                number greater than 2 is not necessarily greater than 2. (nth roots are the equivalent 
                of nth factors in multiplicative semigroups.) Therefore, the concept of "meaningfulness" 
                can be thought of as a generalisation of divisibility.
            </p>
            <p>
                Meaningfulness <em>does</em> imply divisibility if the semigroup has an identity element. 
                To find the factor x / n, you can construct a list with length n and sum x, and then 
                calculate the mean. In a monoid, it is always possible to construct a list with these 
                properties by appending the identity: [x], [x, e], [x, e, e], and so on. So for monoids, 
                meaningfulness and divisibility are equivalent.
            </p>
            <p>
                Given two meaningful semigroups (X, +) and (Y, ‚àó), their direct product is also meaningful. 
                For any list of pairs c ‚àà (X √ó Y)<sup>+</sup>, we can split c into two lists a ‚àà X<sup>+</sup> 
                and b ‚àà Y<sup>+</sup> by putting the first element of each pair in a and the second element 
                of each pair in b. Then the pair (Œº(a), ¬µ(b)) is a mean of c, because Œõ(c)(Œº(a), Œº(b)) = 
                (Œõ(c)Œº(a), Œõ(c)Œº(b)) = (Œõ(a)Œº(a), Œõ(b)Œº(b)) = (Œ£(a), Œ£(b)) = Œ£(c). It is also clearly the 
                <em>only</em> mean of c, because Œº(a) and Œº(b) are the only means of a and b respectively. 
                This means that the direct product of any two meaningful semigroups is meaningful.
            </p>
            <p>
                Many other constructions also preserve meaningfulness. 
            </p>
            <ul>
                <li>
                    Given a meaningful semigroup (X, +), the opposite semigroup (X, (x, y) ‚Ü¶ y + x) is also 
                    meaningful, with Œº(a) in the latter being equivalent to Œº(reverse(a)) in the former. 
                </li>
                <li>
                    The semigroup formed by augmenting a meaningful semigroup (X, +) with an absorbing 
                    element ‚àû (such that ‚àû + x = x + ‚àû = ‚àû) is meaningful. The mean of any list not 
                    containing ‚àû is already defined, and the mean of a list containing ‚àû is just ‚àû.
                </li>
                <li>
                    If a meaningful semigroup (X, +) can be divided into two disjoint subsets Y and Z 
                    such that both are closed under the + operation and Y ‚à™ Z = X, then both (Y, +) and 
                    (Z, +) are meaningful. The mean of a list in Y<sup>+<sub> </sub></sup>must be in Y 
                    because Z is closed, and vice versa. For example, the meaningful semigroup (‚Ñù<sub>>0</sub>, ¬∑) 
                    can be divided into two subsemigroups (‚Ñù<sub>(0, 1]</sub>, ¬∑) and (‚Ñù<sub>>1</sub>, ¬∑). 
                    Both are meaningful by the preceding theorem.
                </li>
            </ul>
            <p>
                One construction that does <em>not </em>preserve meaningfulness is the addition of an 
                identity element. For example, (‚Ñù<sub>>1</sub>, +) is meaningful, but (‚Ñù<sub>>1 </sub>‚à™ {0}, +) 
                is not, even though it is a valid semigroup. The arithmetic mean of [0, 2] is not contained 
                in ‚Ñù<sub>>1 </sub>‚à™ {0}.
            </p>
        </div>

        <!-- Bootstrap JS -->
        <script src="/bootstrap.min.js"></script>
    </body>
</html>